<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-1.8 docs-doc-page docs-doc-id-interactivity/selection" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Cross-Filtering (Selection) | Deneb</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://deneb-viz.github.io/docs/interactivity-selection><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=1.8><meta data-rh=true name=docusaurus_tag content=docs-default-1.8><meta data-rh=true name=docsearch:version content=1.8><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-1.8><meta data-rh=true property=og:title content="Cross-Filtering (Selection) | Deneb"><meta data-rh=true name=description content="It is possible to enable cross-filtering of other visuals when a mark containing a resolvable datum is clicked (or Ctrl/Shift-Clicked for multi-select)."><meta data-rh=true property=og:description content="It is possible to enable cross-filtering of other visuals when a mark containing a resolvable datum is clicked (or Ctrl/Shift-Clicked for multi-select)."><link data-rh=true rel=icon href=/img/favicon.png><link data-rh=true rel=canonical href=https://deneb-viz.github.io/docs/interactivity-selection><link data-rh=true rel=alternate href=https://deneb-viz.github.io/docs/interactivity-selection hreflang=en><link data-rh=true rel=alternate href=https://deneb-viz.github.io/docs/interactivity-selection hreflang=x-default><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://deneb-viz.github.io/docs/interactivity-overview","name":"Interactivity Features","position":1},{"@type":"ListItem","item":"https://deneb-viz.github.io/docs/interactivity-selection","name":"Cross-Filtering (Selection)","position":2}]}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Deneb RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Deneb Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=UA-143608567-3"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-143608567-3",{anonymize_ip:!0})</script><link rel=stylesheet href=/assets/css/styles.70d4f367.css><script src=/assets/js/runtime~main.eaa8b019.js defer></script><script src=/assets/js/main.6eb9d559.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/banner.png alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/img/banner_dark.png alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs>Docs</a><a class="navbar__item navbar__link" href=/blog>Blog</a><a class="navbar__item navbar__link" href=/community/resources>Community & Resources</a><a class="navbar__item navbar__link" href=/support>Support</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/docs/interactivity-selection>1.8</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs/next/interactivity-selection>Canary ðŸš§</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/docs/interactivity-selection>1.8</a><li><a class=dropdown__link href=/docs/1.7/interactivity-selection>1.7</a><li><a class=dropdown__link href=/docs/1.6/interactivity-selection>1.6</a><li><a class=dropdown__link href=/docs/1.5/interactivity-selection>1.5</a><li><a class=dropdown__link href=/docs/1.4/interactivity-selection>1.4</a><li><a class=dropdown__link href=/docs/1.3/interactivity-selection>1.3</a><li><a class=dropdown__link href=/docs/1.2/interactivity-selection>1.2</a><li><a class=dropdown__link href=/docs/1.1/interactivity-selection>1.1</a><li><a class=dropdown__link href=/docs/1.0/interactivity-selection>1.0</a></ul></div><a href=https://github.com/sponsors/deneb-viz target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Sponsor<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><a class="navbar__item navbar__link" href=/privacy-policy>Privacy Policy</a><a href=https://github.com/deneb-viz/deneb target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs>Introduction</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/getting-started>Getting Started</a><button aria-label="Collapse sidebar category 'Getting Started'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/simple-example>Simple Worked Example</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/visual-editor>Visual Editor</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/dataset>Dataset</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/keyboard>Keyboard Shortcuts</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/docs/formatting>Deeper Concepts</a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/formatting>Formatting Values</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/scrolling-overflow>Scrolling and Overflow</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/schemes>Theme Colors and Schemes</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/pattern-fills>Pattern Fills</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/templates>Templates</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/performance>Performance Considerations</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/docs/interactivity-overview>Interactivity Features</a><button aria-label="Collapse sidebar category 'Interactivity Features'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/interactivity-tooltips>Tooltips</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/interactivity-context-menu>Context Menu</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/interactivity-selection>Cross-Filtering (Selection)</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/interactivity-selection-advanced>Advanced Cross-Filtering</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/interactivity-highlight>Cross-Highlighting</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/changelog>Change Log</a><button aria-label="Expand sidebar category 'Change Log'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a href=https://vega.github.io/vega/docs/ target=_blank rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true>Further Resources</a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href=https://vega.github.io/vega/docs/ target=_blank rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex=0>Vega Documentation<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href=http://vega.github.io/vega-lite/docs/ target=_blank rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex=0>Vega-Lite Documentation<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/interactivity-overview><span>Interactivity Features</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Cross-Filtering (Selection)</span></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.8</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cross-Filtering (Selection)</h1></header>
<p>It is possible to enable cross-filtering of other visuals when a mark containing a resolvable datum is clicked (or Ctrl/Shift-Clicked for multi-select).</p>
<p>However, cross-filtering is a bit of a special case vs. <a href=/docs/interactivity-tooltips>tooltips</a> and the <a href=/docs/interactivity-context-menu>context menu</a>. As such, this is <strong>disabled</strong> by default, so as not to create potential UX issues prior to ensuring your visual effects are applied based on selection state. We'll explain on this page what you need to think about if you want to enable this for your visuals, and what to think about from an implementation perspective when creating your specification.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=cross-filtering-strategy>Cross-Filtering Strategy<a href=#cross-filtering-strategy class=hash-link aria-label="Direct link to Cross-Filtering Strategy" title="Direct link to Cross-Filtering Strategy">â€‹</a></h2>
<p>Both <a href=https://vega.github.io/vega/docs/event-streams/ target=_blank rel="noopener noreferrer">Vega</a> (with Signals and Events) and <a href=https://vega.github.io/vega-lite/docs/parameter.html target=_blank rel="noopener noreferrer">Vega-Lite</a> (with Parameters) both have their own ways of managing interactivity internally when it comes to clicking on marks. However we also have to think about <a href="https://docs.microsoft.com/en-us/power-bi/developer/visuals/selection-api?WT.mc_id=DP-MVP-5003712" target=_blank rel="noopener noreferrer">how Power BI manages selection state between visuals</a> and apply this in a generic manner, so Deneb again bridges this particular gap as much as possible. Therefore, cross-filtering works as follows:</p>
<ul>
<li>
<p>You can configure whether Deneb should attempt to <a href=#data-point-resolution>resolve data points</a> when clicking on marks, through the <strong>Expose cross-filtering values for dataset rows</strong> property in the <em>Vega > Power BI Interactivity</em> section of the <a href=/docs/visual-editor#settings-pane>Settings pane in the Visual editor</a>.</p>
</li>
<li>
<p>This setting is <strong>disabled</strong> by default.</p>
</li>
<li>
<p>For each row in the visual <code>"dataset"</code>, Deneb will generate a <a href=#the-__selected__-field>special field for each row</a> called <code>"__selected__"</code>, and will update this based on click events, or eligible external events to your visual, such as restoring a bookmark with an active selection state.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=management-mode-of-cross-filtering-events>Management Mode of Cross-Filtering Events<a href=#management-mode-of-cross-filtering-events class=hash-link aria-label="Direct link to Management Mode of Cross-Filtering Events" title="Direct link to Management Mode of Cross-Filtering Events">â€‹</a></h3>
<p>With the <strong>Expose cross-filtering values for dataset rows</strong> property enabled, Deneb will then display a <strong>Cross-filtering management</strong> setting, with two options:</p>
<p><img decoding=async loading=lazy alt=selection-mode-settings.png src=data:image/png;base64,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 title="With the `Expose cross-filtering values for dataset rows` property enabled, Deneb presents two additional modes for management: Simple (default) and Advanced." width=468 height=126 class=img_ev3q></p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span>'Advanced' Really Means Advanced</div><div class=admonitionContent_BuS1><p>The documentation on this page continues under the assumption that you will be working with the <em>Simple</em> (default) management mode. It is worth starting with this mode to allow Deneb to handle as much as it can for you, although you will still need to do some work. If you are using Vega and have a need to do more than the <em>Simple</em> mode can offer (and are comfortable with how things work), then you can explore <a href=/docs/interactivity-selection-advanced>Advanced Cross-Filtering</a>.</div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=additional-strategy-for-the-simple-management-mode>Additional Strategy for the <em>Simple</em> Management Mode<a href=#additional-strategy-for-the-simple-management-mode class=hash-link aria-label="Direct link to additional-strategy-for-the-simple-management-mode" title="Direct link to additional-strategy-for-the-simple-management-mode">â€‹</a></h3>
<ul>
<li>
<p>If multiple data points are selected (i.e. by holding the Ctrl or Shift key), Deneb will add these to the current list of selected data points and update the <code>__selected__</code> value accordingly.</p>
</li>
<li>
<p>Clicking anything other than a mark within the visual canvas (or a mark that cannot be resolved to one or more data points) will clear the current selection from the visual, and signal to Power BI to do the same for other visuals on the page.</p>
</li>
<li>
<p>It is up to you as a creator to use this field to <a href=/docs/interactivity-overview#visual-effects-and-behavior>manage the visual effects within your specification</a> for selected vs. unselected marks. A simple illustration of this is covered <a href=/docs/simple-example#cross-filtering>in the worked example</a> and some further simple examples are <a href=#managing-selection-state-visually-through-encodings>covered further down the page</a>.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=data-point-resolution>Data Point Resolution<a href=#data-point-resolution class=hash-link aria-label="Direct link to Data Point Resolution" title="Direct link to Data Point Resolution">â€‹</a></h2>
<p>With the <strong>Expose cross-filtering values for dataset rows</strong> property enabled, Deneb will monitor marks for click events. If the mark represents an un-transformed row's datum from your <code>"dataset"</code> (or has enough information for Deneb to resolve it), it will be added to the list of currently selected data points and delegated to Power BI for handling other visuals in a page, e.g.:</p>
<p><img decoding=async loading=lazy alt=selection-simple-single-point.png src=/assets/images/selection-simple-single-point-5147edf044e9b4381ea7c87be5049e85.png title="Enabling cross-filtering and clicking a resolvable data point will trigger selection in other visuals on the page." width=950 height=421 class=img_ev3q></p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span>You Must Manage Visual Effects and Encodings</div><div class=admonitionContent_BuS1><p>Note that the above is based on the visual produced <a href=/docs/simple-example#cross-filtering>in the worked example</a>. As such this has an encoding applied to add an effect to marks that are in the current list of selected data points and is to help illustrate the concept. You will need to <a href=#managing-selection-state-visually-through-encodings>manage such encodings yourself</a>. The card to the right of the visual is merely for illustrative purposes: it helps us to re-state the selected values via another measure and confirm selections are propagated.</div></div>
<p>Holding the Ctrl or Shift key and clicking additional marks that contain resolvable data points will add these to the current list and affect other visuals, e.g.:</p>
<p><img decoding=async loading=lazy alt=selection-simple-multiple-point.png src=/assets/images/selection-simple-multiple-point-9fabdf40c672b8837875c14ee27040f0.png title="Ctrl/Shift-clicking additional resolvable data points will add these to the list of selected data points and update other visuals accordingly." width=950 height=422 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=primitive-aggregate-resolution>Primitive Aggregate Resolution<a href=#primitive-aggregate-resolution class=hash-link aria-label="Direct link to Primitive Aggregate Resolution" title="Direct link to Primitive Aggregate Resolution">â€‹</a></h3>
<p>For marks or layers that contain simple aggregates, Deneb can attempt to resolve and collect the individual data points, based on the unique values of grouped fields. This can be useful but there are a couple of considerations here:</p>
<ul>
<li>Any columns and measures need to be aliased in this new data stream as the corresponding columns and measures they are derived from.</li>
<li>If you are applying filtering or additional transforms that remove the component rows, this is not taken into account.</li>
<li>As the data is a new stream, the granularity (and therefore the row context) is different to the base <code>"dataset"</code>. This means that there is no <a href=#the-__selected__-field>corresponding <code>__selected__</code> field</a> to help manage selection state, but it is possible to be creative here and give the impression of selection at a higher level; there is an example of this below.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=data-point-limit>Data Point Limit<a href=#data-point-limit class=hash-link aria-label="Direct link to Data Point Limit" title="Direct link to Data Point Limit">â€‹</a></h2>
<p>A high number of active selections can give Power BI a lot of work to do in terms of managing state between all the visuals on a page and can potentially cause performance issues. Given the flexible nature of Vega/Vega-Lite and the types of visuals you can produce, there is a limit on the number of data points that can be supplied to Power BI. This can start to add up, particularly if you use a low level of granularity but are attempting to select a mark that <a href=#primitive-aggregate-resolution>aggregates many data points</a>.</p>
<p>A <strong>Data Point Limit</strong> property is exposed in the <strong>Settings</strong> pane when cross-filtering is enabled, e.g.:</p>
<p><img decoding=async loading=lazy alt=selection-data-limit-property.png src=/assets/images/selection-data-limit-property-dcb7a91ace5672dd19763278ee7489d1.png title="The Data Point Limit property allows you to specify a maximum number of data points that Power BI should delegate for cross-filtering purposes within the current report page from Deneb." width=505 height=147 class=img_ev3q></p>
<p>As you can see from the above screenshot, this defaults at <strong>50</strong>, but can be set from anywhere between <strong>1</strong> and <strong>250</strong>.</p>
<p>When interacting with your visual, if you accumulate enough data points in the current selection list, you will see this message in the visual header:</p>
<p><img decoding=async loading=lazy alt=selection-data-limit-exceeded.png src=data:image/png;base64,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 title="If a selection exceeds the maximum limit, Deneb will prompt with a warning and prohibit further selection (but keep the current selection active)." width=302 height=134 class=img_ev3q></p>
<p>In this situation, Deneb will keep the current selection active, but will not add any more rows to it.</p>
<p>This warning can then be dismissed by either:</p>
<ul>
<li>Clicking the <strong>Dismiss</strong> option (continuing to preserve the current selection)</li>
<li>Clicking on another mark (initializing a new selection, if eligible)</li>
<li>Clicking elsewhere in the visual, or on the <strong>Clear selection</strong> option (clearing the current selection)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=the-__selected__-field>The <code>__selected__</code> Field<a href=#the-__selected__-field class=hash-link aria-label="Direct link to the-__selected__-field" title="Direct link to the-__selected__-field">â€‹</a></h2>
<p>Deneb will maintain the value of this field for each row in your dataset as follows:</p>
<ul>
<li><strong><code>on</code></strong>: the visual has an active selection state and the row is <strong>included</strong> in the list of selected data points.</li>
<li><strong><code>off</code></strong>: the visual has an active selection state and the row is <strong>excluded</strong> from the list of selected data points.</li>
<li><strong><code>neutral</code></strong>: the visual has no current selection state and the data point should be displayed normally.</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>Why 3 States?</div><div class=admonitionContent_BuS1><p>The reason we have three states rather than a simple <strong><code>on</code></strong>/<strong><code>off</code></strong>, or binary state, is to allow us the (optional) opportunity to style elements that are explicitly highlighted differently to those that are displayed regularly (<strong><code>neutral</code></strong>) and open up further possibilities for our readers.</div></div>
<p>Some further examples of leveraging this state management are <a href=#simple-worked-examples>detailed further below</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=managing-selection-state-visually-through-encodings>Managing Selection State Visually through Encodings<a href=#managing-selection-state-visually-through-encodings class=hash-link aria-label="Direct link to Managing Selection State Visually through Encodings" title="Direct link to Managing Selection State Visually through Encodings">â€‹</a></h2>
<p>As mentioned higher up, if you want Cross-Filtering to work effectively for your readers, you will need to use the state of the <code>__selected__</code> field for each row and encode marks accordingly, so that your visuals communicate selected vs un-selected marks effectively. We'd recommend a similar approach to most other Power BI visuals in at least setting the opacity of effected marks accordingly, but the flexibility of the Vega languages gives you the ability to explore other possibilities.</p>
<p>The <a href=#simple-worked-examples>Simple Worked Examples</a> section below shows how you may be able to get started with exploring this further. While these focus on Vega-Lite, both versions of the <em>Simple Bar Chart</em> template available from the <em>New Specification</em> dialog contain simple bindings for Cross-Filtering to help you get started.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=limitations-and-considerations>Limitations and Considerations<a href=#limitations-and-considerations class=hash-link aria-label="Direct link to Limitations and Considerations" title="Direct link to Limitations and Considerations">â€‹</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>This Sounds Hard...</div><div class=admonitionContent_BuS1><p>Well, it's not always straightforward! It is early days for this type of "visual thinking" within Power BI, and it is likely that the community will be able to uncover better design patterns than the ones outlined on this page. They will certainly help you get on your way.<p>If you have found an alternative approach, or have a great idea on how to help us improve this, then <a href=https://github.com/deneb-viz/deneb/issues target=_blank rel="noopener noreferrer">please let us know</a>! We would love to continue to evolve this functionality and make it more accessible if we can do so.</div></div>
<ul>
<li>
<p>Data resolution integration with Power BI is wholly dependent on the correct row context. <a href=#data-point-resolution>Refer above</a>, or to the <a href=/docs/interactivity-overview>Overview</a> page for more information about how to to try and ensure that this is preserved.</p>
</li>
<li>
<p>It might sometimes be possible to simulate a selection effect when using aggregates, but this will require some lateral thought. <a href=#example-3-approach-for-styling-aggregate-marks>Example 3 below</a> shows one potential approach to how this could be solved.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=simple-worked-examples>Simple Worked Examples<a href=#simple-worked-examples class=hash-link aria-label="Direct link to Simple Worked Examples" title="Direct link to Simple Worked Examples">â€‹</a></h2>
<p>The following examples are for Vega-Lite but similar principles can be applied for Vega.</p>
<p>This report shows the three examples below how they would be rendered in Power BI, using a model based on the sample financial data available in Power BI Desktop. In each case, the full tooltip data is exposed so that you can observe the state of the <code>__selected__</code> field. We've also added some additional marks to the examples to show this value explicitly as interaction events occur. We'll provide basic example JSON for each underneath.</p>
<iframe width=100% height=486 src="https://app.powerbi.com/view?r=eyJrIjoiMmI5OTRhMGMtODJiMi00MTIyLTgzZDgtYjU2N2M2NWM3ZDk4IiwidCI6IjUzYmJlMGQ3LTU0NzItNGQ0NS04NGY0LWJiNzJiYjFjMjI4OSJ9" frameborder=0 allowfullscreen></iframe>
<p>Â Â Â Â <em><a href=/assets/files/Deneb-Simple-Cross-Filtering-Examples-20b748abea10fa926bc2db03a293755f.pbix target=_blank>Download this workbook</a></em></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=example-1-simple-encoding-of-opacity-with-conditions>Example 1: Simple Encoding of Opacity with Conditions<a href=#example-1-simple-encoding-of-opacity-with-conditions class=hash-link aria-label="Direct link to Example 1: Simple Encoding of Opacity with Conditions" title="Direct link to Example 1: Simple Encoding of Opacity with Conditions">â€‹</a></h4>
<p>As per the worked example and the in-built templates for the bar chart, we can encode our <code>opacity</code> based on the value of <code>__selected__</code> being set to <code>"off"</code>, e.g.:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token property" style=color:#36acaa>"data"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token property" style=color:#36acaa>"name"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"dataset"</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token property" style=color:#36acaa>"mark"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token property" style=color:#36acaa>"type"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"bar"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token property" style=color:#36acaa>"tooltip"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>true</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token property" style=color:#36acaa>"encoding"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token property" style=color:#36acaa>"y"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"field"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Country (Short)"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"type"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"nominal"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token property" style=color:#36acaa>"x"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"field"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"$ Sales"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"type"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"quantitative"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token property" style=color:#36acaa>"opacity"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"condition"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token property" style=color:#36acaa>"test"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">          </span><span class="token property" style=color:#36acaa>"field"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"__selected__"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">          </span><span class="token property" style=color:#36acaa>"equal"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"off"</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token property" style=color:#36acaa>"value"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.3</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"value"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span></span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=example-2-styling-explicitly-selected-marks-vs-standard-neutral>Example 2: Styling Explicitly Selected Marks vs. Standard (neutral)<a href=#example-2-styling-explicitly-selected-marks-vs-standard-neutral class=hash-link aria-label="Direct link to Example 2: Styling Explicitly Selected Marks vs. Standard (neutral)" title="Direct link to Example 2: Styling Explicitly Selected Marks vs. Standard (neutral)">â€‹</a></h4>
<p>We can extend the above example to explicitly style selected marks when <code>__selected__</code> is set to <code>on</code> rather than just having a binary state if we so wish. Here we have applied a <a href=/docs/pattern-fills>pattern fill</a> when <code>__selected__</code> for a row is <code>neutral</code>, making it more emphasized, e.g.:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token property" style=color:#36acaa>"data"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token property" style=color:#36acaa>"name"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"dataset"</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token property" style=color:#36acaa>"mark"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token property" style=color:#36acaa>"type"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"bar"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token property" style=color:#36acaa>"tooltip"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>true</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token property" style=color:#36acaa>"encoding"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token property" style=color:#36acaa>"y"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"field"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"City"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"type"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"nominal"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token property" style=color:#36acaa>"x"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"field"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Mean Temperature"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"type"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"quantitative"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token property" style=color:#36acaa>"opacity"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"condition"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token property" style=color:#36acaa>"test"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">          </span><span class="token property" style=color:#36acaa>"field"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"__selected__"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">          </span><span class="token property" style=color:#36acaa>"equal"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"off"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token property" style=color:#36acaa>"value"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.3</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token property" style=color:#36acaa>"fill"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"condition"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token property" style=color:#36acaa>"test"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">          </span><span class="token property" style=color:#36acaa>"field"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"__selected__"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">          </span><span class="token property" style=color:#36acaa>"equal"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"on"</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token property" style=color:#36acaa>"value"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">          </span><span class="token property" style=color:#36acaa>"expr"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"pbiPatternSVG('diagonal-stripe-6', '#605E5C', '#ffffff')"</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span></span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=example-3-approach-for-styling-aggregate-marks>Example 3: Approach for Styling Aggregate Marks<a href=#example-3-approach-for-styling-aggregate-marks class=hash-link aria-label="Direct link to Example 3: Approach for Styling Aggregate Marks" title="Direct link to Example 3: Approach for Styling Aggregate Marks">â€‹</a></h4>
<p>This scenario is much more complicated, as many transforms tend to create separate data streams; this will often cause us to the lose the row context information. This example uses aggregates internally to group rows. The top 3 have the same grain but the row identifies are not preserved in the output data stream. The <em>'All Others'</em> group contains three underlying data points but these are aggregated down to a single row and our lineage is not available.</p>
<p>As mentioned above, Deneb will attempt a simple reconciliation against the original <code>"dataset"</code>, much like it does for tooltips, but this is currently very basic. However we can use approaches, such as <a href=https://vega.github.io/vega-lite/docs/layer.html target=_blank rel="noopener noreferrer">layers</a> to give the impression of selection effects. This example is detailed more in the embedded report page above, but the high-level strategy is as follows:</p>
<ol>
<li>At the top level, <a href=https://vega.github.io/vega-lite/docs/calculate.html target=_blank rel="noopener noreferrer"><code>calculate</code> a column</a> that conditionally sums our measure value if a row's <code>__selected__</code> value is not <code>off</code>. Otherwise, treat the value as <code>0</code>.</li>
<li>Add a layer that calculates two additional marks:<!-- -->
<ul>
<li>A <code>bar</code> with reduced opacity that is the total sum of the primary measure.</li>
<li>A fully opaque <code>bar</code> based on the <code>sum</code> of the calculated value in step 1. As this is drawn after the dimmed bar above, it will be zero-width if the value is <code>0</code>; otherwise it will have the same width as our primary measure and sit over the top of the underlying mark.</li>
</ul>
</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token property" style=color:#36acaa>"data"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token property" style=color:#36acaa>"name"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"dataset"</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token property" style=color:#36acaa>"transform"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"calculate"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"datum.__selected__ === 'off' ? 0 : datum['$ Sales']"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"as"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Sales_Selected"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token property" style=color:#36acaa>"layer"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"description"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Dimmed Bar; width = sum of Sales"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"mark"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token property" style=color:#36acaa>"type"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"bar"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token property" style=color:#36acaa>"opacity"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.3</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token property" style=color:#36acaa>"tooltip"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>true</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"encoding"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token property" style=color:#36acaa>"x"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">          </span><span class="token property" style=color:#36acaa>"aggregate"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"sum"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">          </span><span class="token property" style=color:#36acaa>"field"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"$ Sales"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">          </span><span class="token property" style=color:#36acaa>"tooltip"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>true</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"description"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Fully Opaque Bar; width = Selected_Sales"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"mark"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token property" style=color:#36acaa>"type"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"bar"</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"encoding"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token property" style=color:#36acaa>"x"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">          </span><span class="token property" style=color:#36acaa>"aggregate"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"sum"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">          </span><span class="token property" style=color:#36acaa>"field"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Sales_Selected"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token property" style=color:#36acaa>"encoding"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token property" style=color:#36acaa>"y"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"field"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Product Group"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"type"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"nominal"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token property" style=color:#36acaa>"sort"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">        </span><span class="token property" style=color:#36acaa>"field"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Product Group Sort"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style=color:#393A34><span class=codeLineNumber_Tfdd></span><span class=codeLineContent_feaV><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span></span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/deneb-viz/deneb-viz.github.io/edit/source/versioned_docs/version-1.8/interactivity/selection.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/interactivity-context-menu><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Context Menu</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/interactivity-selection-advanced><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Advanced Cross-Filtering</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#cross-filtering-strategy class="table-of-contents__link toc-highlight">Cross-Filtering Strategy</a><ul><li><a href=#management-mode-of-cross-filtering-events class="table-of-contents__link toc-highlight">Management Mode of Cross-Filtering Events</a><li><a href=#additional-strategy-for-the-simple-management-mode class="table-of-contents__link toc-highlight">Additional Strategy for the <em>Simple</em> Management Mode</a></ul><li><a href=#data-point-resolution class="table-of-contents__link toc-highlight">Data Point Resolution</a><ul><li><a href=#primitive-aggregate-resolution class="table-of-contents__link toc-highlight">Primitive Aggregate Resolution</a></ul><li><a href=#data-point-limit class="table-of-contents__link toc-highlight">Data Point Limit</a><li><a href=#the-__selected__-field class="table-of-contents__link toc-highlight">The <code>__selected__</code> Field</a><li><a href=#managing-selection-state-visually-through-encodings class="table-of-contents__link toc-highlight">Managing Selection State Visually through Encodings</a><li><a href=#limitations-and-considerations class="table-of-contents__link toc-highlight">Limitations and Considerations</a><li><a href=#simple-worked-examples class="table-of-contents__link toc-highlight">Simple Worked Examples</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Documentation</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/docs>Docs</a><li class=footer__item><a href=https://vega.github.io/vega/docs/ target=_blank rel="noopener noreferrer" class=footer__link-item>Vega Documentation<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://vega.github.io/vega-lite/docs/ target=_blank rel="noopener noreferrer" class=footer__link-item>Vega-Lite Documentation<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/community/resources>Resources and Examples</a><li class=footer__item><a class=footer__link-item href=/support>Support</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/privacy-policy>Privacy Policy</a><li class=footer__item><a class=footer__link-item href=/blog>Blog</a><li class=footer__item><a href=https://github.com/sponsors/deneb-viz target=_blank rel="noopener noreferrer" class=footer__link-item>Sponsor<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/deneb-viz/deneb target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Deneb is released under the MIT License.</div></div></div></footer></div>