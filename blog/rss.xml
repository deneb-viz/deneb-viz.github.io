<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="rss.xsl"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Deneb Blog</title>
        <link>https://deneb-viz.github.io/blog</link>
        <description>Deneb Blog</description>
        <lastBuildDate>Thu, 17 Jul 2025 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Deneb 1.8 Released]]></title>
            <link>https://deneb-viz.github.io/blog/1-8-release</link>
            <guid>https://deneb-viz.github.io/blog/1-8-release</guid>
            <pubDate>Thu, 17 Jul 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Deneb 1.8 has passed AppSource certification checks and is pending deployment to your reports]]></description>
            <content:encoded><![CDATA[<p>Version 1.8 is a maintenance update, which brings Deneb up to the latest Microsoft APIs and certification standards and updates the current Vega and Vega-Lite runtimes. It also prepares the v1 codebase for the end of feature development and long-term service continuity, while addressing several minor but long-standing bugs.</p>
<p>You can view all changes and their associated details starting with the <a href="https://deneb-viz.github.io/docs/changelog">Change Log</a>. And as always, this has also been made available for users of the standalone (non-AppSource) version, so you can <a href="https://github.com/deneb-viz/deneb/releases/latest" target="_blank" rel="noopener noreferrer">download it from GitHub</a>.</p>
<p>Again, I'm extremely grateful to our community, especially those who volunteer to help test the builds before we submit them to AppSource for everyone else to use. Deneb has become a little more than one person can completely handle in their free time, so any and all assistance from these folks is essential to keep our quality and stability as high as possible as we evolve. I hope that you appreciate and value their contributions as much as I do!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="readiness-for-v2-and-the-future-of-v1">Readiness for v2 and the Future of v1<a href="https://deneb-viz.github.io/blog/1-8-release#readiness-for-v2-and-the-future-of-v1" class="hash-link" aria-label="Direct link to Readiness for v2 and the Future of v1" title="Direct link to Readiness for v2 and the Future of v1">​</a></h3>
<p>I've mentioned this in a previous post, but to provide a more recent update, I'm spending a lot of my time and effort working on Deneb v2. This is a significant shift in terms of architecture, will form the basis of all future features and as such replace v1 as the dominant version of Deneb in the future. It is a complete rewrite following the lessons learned from the development of v1, as well as learning from the feedback and suggestions of our community.</p>
<p>This includes a huge look at the template definition format and underlying visual property structure that we use for configuration and persistence inside Power BI workbooks: as we now have tooling like PBIR, which better structures the report layer and also exposes the internal configuration for a visual instance. As such, there is too much complexity and ambiguity with the current v1 implementation if you are approaching this from a programmatic perspective.</p>
<p>This structure is being redesigned and streamlined, which will make it easier to work with if you have ideas for the potential automation of visual configuration, or if you want to potentially build your own tools to work with Deneb. It is also designed to be more modular, extensible and maintainable, which will allow us to add new features and improvements more rapidly in the future.</p>
<p><strong>As such, the v2 visual will be a brand new product, and AppSource listing. It will remain free and open-source.</strong></p>
<p>Because Power BI reports are intended to be stable for users once delivered, it's important to me that we take a similar approach for Deneb where v1 is concerned and I don't want to either introduce a potentially breaking change to existing reports if we attempt to update the visual in-place through the standard AppSource update process, or just remove the v1 visual from AppSource and leave existing reports with no visual at all.</p>
<p>Therefore, the plan for v1 is to continue to provide critical bug fixes, Vega language updates (providing they remain compatible with the v1 architecture) and Power BI visual API compatibility, to comply with certification requirements. However, no new features will be added to the v1 codebase unless there is a significant justification to do so.</p>
<p>Because Deneb development is done in my free time, I'm always "a couple of months away" from having something tangible to show you, and it may feel like the wheels are spinning a bit, but a lot is happening: in the last 8 months, more commits have gone into the v2 codebase than have gone into the entirety of v1 since its inception nearly five years ago. There will be more news soon, but I wanted to provide this update to keep you up to date with how things are progressing.</p>
<hr>
<p>Thanks as always,</p>
<p>DM-P</p>]]></content:encoded>
            <category>releases</category>
            <category>certification</category>
            <category>production</category>
        </item>
        <item>
            <title><![CDATA[New AppSource Sample Workbook]]></title>
            <link>https://deneb-viz.github.io/blog/sample-workbook-update</link>
            <guid>https://deneb-viz.github.io/blog/sample-workbook-update</guid>
            <pubDate>Thu, 08 May 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[The sample workbook that is available with Deneb's AppSource listing has received a huge update, to additionally focus on learning Vega-Lite concepts.]]></description>
            <content:encoded><![CDATA[<p>We're excited to introduce a brand-new sample workbook designed to help you get started with Deneb and Vega-Lite for Power BI. Inside, you'll find practical learning materials, a selection official Vega datasets, and various chart types to help you dive straight into the world of Deneb and the powerful grammar of graphics behind Vega and Vega-Lite.</p>
<!-- -->
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Where to download</div><div class="admonitionContent_BuS1"><p>The sample workbook can be downloaded from <a href="https://appsource.microsoft.com/en-us/product/power-bi-visuals/coacervolimited1596856650797.deneb" target="_blank" rel="noopener noreferrer">Deneb's page in AppSource</a> or from the listing in Power BI Desktop.</p></div></div>
<p>Whether you're just starting out or looking to explore new data visualization possibilities, this workbook was created with you in mind—especially if you're new to Deneb or the Vega languages. We've included a collection of official Vega datasets and a mix of chart examples so you can begin experimenting and building your own custom visuals in Power BI right away.</p>
<div dir="ltr" aria-roledescription="carousel"><div class="react-slideshow-container"><button type="button" class="nav default-nav " data-type="prev" aria-label="Previous Slide"><svg width="24" height="24" viewBox="0 0 24 24"><path d="M16.67 0l2.83 2.829-9.339 9.175 9.339 9.167-2.83 2.829-12.17-11.996z"></path></svg></button><div class="react-slideshow-wrapper slide "><div class="images-wrap horizontal" style="transform:translateX(-0px)"><div data-index="-1" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-014.png)"></div></div></div><div data-index="0" class="active" aria-roledescription="slide" aria-hidden="false"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-001.png)"></div></div></div><div data-index="1" class="" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-002.png)"></div></div></div><div data-index="2" class="" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-003.png)"></div></div></div><div data-index="3" class="" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-004.png)"></div></div></div><div data-index="4" class="" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-005.png)"></div></div></div><div data-index="5" class="" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-006.png)"></div></div></div><div data-index="6" class="" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-007.png)"></div></div></div><div data-index="7" class="" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-008.png)"></div></div></div><div data-index="8" class="" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-009.png)"></div></div></div><div data-index="9" class="" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-010.png)"></div></div></div><div data-index="10" class="" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-011.png)"></div></div></div><div data-index="11" class="" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-012.png)"></div></div></div><div data-index="12" class="" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-013.png)"></div></div></div><div data-index="13" class="" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-014.png)"></div></div></div><div data-index="14" aria-roledescription="slide" aria-hidden="true"><div><div class="imageContainer_OtP6" style="background-image:url(/img/blog/2025-05-08-sample-workbook/page-001.png)"></div></div></div></div></div><button type="button" class="nav default-nav " data-type="next" aria-label="Next Slide"><svg width="24" height="24" viewBox="0 0 24 24"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"></path></svg></button></div></div>
<br>
<p>This project was inspired by my own learning journey. Coming into Power BI without a technical or data-specific background, I initially found it challenging to work with new languages like Vega-Lite. I understood the types of visuals I wanted to create, but I didn’t yet have the foundational knowledge to bring those ideas to life. After much studying and hands-on practice, I can now say with confidence that creating visualizations with Vega-Lite in Deneb feels just as natural and intuitive as building native Power BI visuals.</p>
<p>This workbook is a way of giving back to the community that helped me grow and develop my skills. It is not only a celebration of learning and discovery, but also a celebration of all data enthusiasts, and the art of data visualization. The combination of Deneb, Vega/Vega-Lite and Power BI enable us to expand our visualization vocabulary, and to think beyond the pre-built confinements. It opens up an exciting space for data storytelling and exploration, where our only limitation is our imagination.</p>
<p>We hope you find this resource helpful and that you enjoy it as much as we did creating it. Enjoy!</p>]]></content:encoded>
            <category>samples</category>
            <category>getting-started</category>
            <category>vega-lite</category>
        </item>
        <item>
            <title><![CDATA[How-To: The Stacked Bar Alternative]]></title>
            <link>https://deneb-viz.github.io/blog/stacked-bar-alternative</link>
            <guid>https://deneb-viz.github.io/blog/stacked-bar-alternative</guid>
            <pubDate>Tue, 08 Apr 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Using Vega-Lite to replicate a more readable alternative to a stacked bar chart.]]></description>
            <content:encoded><![CDATA[<p>I've become smitten with this stacked bar chart alternative, as <a href="https://www.flerlagetwins.com/2025/04/the-best-alternative-to-stacked-bar.html" target="_blank" rel="noopener noreferrer">recently showcased on the Flerlage Twins blog</a>. This article is a brilliant insight into a collaborative process between <a href="https://www.linkedin.com/in/sebastine-amede/" target="_blank" rel="noopener noreferrer">Sebastine Amede</a>, <a href="https://www.linkedin.com/in/darraghmurray/" target="_blank" rel="noopener noreferrer">Darragh Murray</a> and <a href="https://www.linkedin.com/in/kevin-flerlage-20106a8" target="_blank" rel="noopener noreferrer">Kevin</a>, with a further spotlight on folks who have inspired their final design. It's a really brilliant way of keeping the part-to-whole idea of a stacked bar chart, while also making the individual segments much easier to compare.</p>
<p>As always, when I see cool things (and because I enjoy using the tooling as well as developing it), I wonder how easy they might be to replicate in Power BI using Deneb. I thought it would be a fun exercise to try and replicate the example from the blog post using Vega-Lite. Fortunately, Vega-Lite has multiple encoding channels along each direction for Cartesian plots, which makes it a fairly straightforward process.</p>
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="finished-recipe">Finished Recipe<a href="https://deneb-viz.github.io/blog/stacked-bar-alternative#finished-recipe" class="hash-link" aria-label="Direct link to Finished Recipe" title="Direct link to Finished Recipe">​</a></h2>
<p>This is how our final design will look:</p>
<p><img decoding="async" loading="lazy" alt="finished-recipe" src="https://deneb-viz.github.io/assets/images/finished-recipe-84c7c39f6feed2f56a3e6f53db9d7d06.png" title="An alternative to a stacked bar chart, first grouping the data by one dimension (Country) and then by another (Segment). Country has a bar representing the total sales, and Segment has a bar representing the total sales for each segment. The segments are then displayed as a separate bar chart within the bar for each country. Segment is color-coded and show in the legend. Each bar has labels showing the total sales represented by each mark. The consolidated bar representing country also has a label showing which country the mark is representing." width="657" height="406" class="img_ev3q"></p>
<p>Although Deneb is a Power BI-specific tool, I'll produce the example using Vega-Lite natively, so we can visualize our progress on this post using embedded Vega-Lite visuals that you can open in the Vega Editor to further explore and/or remix. There may be some steps to make modifications if you have a preference for using Deneb-specific features like integrating your <a href="https://deneb-viz.github.io/docs/schemes">Power BI theme</a> or <a href="https://deneb-viz.github.io/docs/formatting">Power BI-specific number formatting</a>, but they should be fairly straightforward.</p>
<p>For those who just want to get started with the finished product, there are assets available <a href="https://deneb-viz.github.io/blog/stacked-bar-alternative#wrapping-up">at the bottom of this article</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="our-data">Our Data<a href="https://deneb-viz.github.io/blog/stacked-bar-alternative#our-data" class="hash-link" aria-label="Direct link to Our Data" title="Direct link to Our Data">​</a></h2>
<p>I'm going to start with the simple financial data that <a href="https://learn.microsoft.com/en-us/power-bi/create-reports/sample-financial-download" target="_blank" rel="noopener noreferrer">you can download from MS Learn</a>. For this example, I'm adding the <strong>Country</strong> and <strong>Segment</strong> columns, and the <strong>$ Sales</strong> measure, so we have a lower-level granularity than we might normally have for a simple bar chart:</p>
<table><thead><tr><th>Country</th><th>Segment</th><th>Sales</th></tr></thead><tbody><tr><td>Canada</td><td>Channel Partners</td><td>19752468</td></tr><tr><td>Canada</td><td>Enterprise</td><td>144752736</td></tr><tr><td>Canada</td><td>Government</td><td>428829833</td></tr><tr><td>Canada</td><td>Midmarket</td><td>21616940</td></tr><tr><td>Canada</td><td>Small Business</td><td>361203792</td></tr><tr><td>France</td><td>Channel Partners</td><td>15178124</td></tr><tr><td>France</td><td>Enterprise</td><td>150182723</td></tr><tr><td>France</td><td>Government</td><td>432792397</td></tr><tr><td>France</td><td>Midmarket</td><td>25395919</td></tr><tr><td>France</td><td>Small Business</td><td>274034856</td></tr><tr><td>Germany</td><td>Channel Partners</td><td>9807620</td></tr><tr><td>Germany</td><td>Enterprise</td><td>146362549</td></tr><tr><td>Germany</td><td>Government</td><td>307773485</td></tr><tr><td>Germany</td><td>Midmarket</td><td>12452545</td></tr><tr><td>Germany</td><td>Small Business</td><td>281729079</td></tr><tr><td>Mexico</td><td>Channel Partners</td><td>8887825</td></tr><tr><td>Mexico</td><td>Enterprise</td><td>130960356</td></tr><tr><td>Mexico</td><td>Government</td><td>413892255</td></tr><tr><td>Mexico</td><td>Midmarket</td><td>16428775</td></tr><tr><td>Mexico</td><td>Small Business</td><td>308830851</td></tr><tr><td>United States of America</td><td>Channel Partners</td><td>12059458</td></tr><tr><td>United States of America</td><td>Enterprise</td><td>166894624</td></tr><tr><td>United States of America</td><td>Government</td><td>362146299</td></tr><tr><td>United States of America</td><td>Midmarket</td><td>21890524</td></tr><tr><td>United States of America</td><td>Small Business</td><td>463176030</td></tr></tbody></table>
<p>This produces the dataset for our Deneb visual and I'll add this to the <strong>Values</strong> data role, as I would for any project.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="thinking-about-our-design">Thinking About Our Design<a href="https://deneb-viz.github.io/blog/stacked-bar-alternative#thinking-about-our-design" class="hash-link" aria-label="Direct link to Thinking About Our Design" title="Direct link to Thinking About Our Design">​</a></h2>
<p>While the finished recipe contains <code>text</code> marks to further annotate our chart, the solution itself can be approached at a high level as follows:</p>
<ol>
<li>Adding our highest-level grouping field (Country) to the <code>x</code> encoding channel and aggregating our measure (Sales) using <code>sum</code>.</li>
<li>Adding our lower-level grouping field (Segment) to the <code>xOffset</code> encoding channel.</li>
</ol>
<p>Everything else will work within these constraints.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-highest-level-grouping">Step 1: Highest Level Grouping<a href="https://deneb-viz.github.io/blog/stacked-bar-alternative#step-1-highest-level-grouping" class="hash-link" aria-label="Direct link to Step 1: Highest Level Grouping" title="Direct link to Step 1: Highest Level Grouping">​</a></h2>
<p>Here's how we produce a summarized bar chart for our highest-level grouping (Country):</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"data"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"dataset"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"layer"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"y"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"aggregate"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"mark"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"color"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"#d4d4d4"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"x"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Country"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"sort"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"op"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"order"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"descending"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"y"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"quantitative"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<ul>
<li>Note that I'm already thinking about the above approach by using a <code>layer</code> rather than a <code>mark</code> at the top level..</li>
<li>As our <code>y</code> encoding channel is <code>quantitative</code>, I'm putting that at the top level, and adding a <code>y</code> encoding channel by an aggregate of <strong>Sales</strong> in the layer (due to granularity). This will inherit the top-level <code>type</code> and we won't need to repeat this, due to how Vega-Lite will union the y-scale.</li>
<li>The <code>x</code> encoding channel will be shared by all layers, so this is at the top level. I'm also sorting this in descending order of <strong>Sales</strong> (again aggregated).</li>
</ul>
<p>Our design looks pretty normal right now, but as we might expect:</p>
<div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-lowest-level-grouping">Step 2: Lowest Level Grouping<a href="https://deneb-viz.github.io/blog/stacked-bar-alternative#step-2-lowest-level-grouping" class="hash-link" aria-label="Direct link to Step 2: Lowest Level Grouping" title="Direct link to Step 2: Lowest Level Grouping">​</a></h2>
<p>With our primary channels (<code>x</code> and <code>y</code>) worked out, we can add our second layer, which will perform the offset within each bar, based on the <strong>Segment</strong> field:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"data"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"dataset"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"layer"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ... </span><span class="token comment" style="color:#999988;font-style:italic">// Our first layer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"y"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"xOffset"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Segment"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"sort"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"order"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"descending"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"scale"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"padding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"color"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Segment"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"sort"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"order"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"descending"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"mark"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"stroke"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"white"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ... </span><span class="token comment" style="color:#999988;font-style:italic">// Our original encoding</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<ul>
<li>This layer has the <code>y</code> encoding channel set the the <strong>Sales</strong> field.</li>
<li>Because we're at our lowest level of granularity, we don't need to aggregate this.</li>
<li>The <code>xOffset</code> channel is set to the <strong>Segment</strong> field, and we're sorting this in descending order of <strong>Sales</strong>. This will produce individual bars within each bigger bar, sharing the top-level <code>x</code> encoding channel for their corresponding <strong>Country</strong>. Theres a small amount of <code>padding</code> here, to help space them out a bit better.</li>
<li>The <code>color</code> channel is set to the <strong>Segment</strong> field, which will also give us our legend. This is sorted in descending order of sales, to match the ordering of the <code>xOffset</code> channel and having each legend item match the order of the segments in the chart.</li>
<li>Each bar has a white <code>stroke</code>, just to help with contrast against the bar behind it.</li>
</ul>
<p>As this point, we should be able to see that the main challenge has been solved and we have our "bars within bars" design:</p>
<div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-cleaning-up-the-plot-area">Step 3: Cleaning Up the Plot Area<a href="https://deneb-viz.github.io/blog/stacked-bar-alternative#step-3-cleaning-up-the-plot-area" class="hash-link" aria-label="Direct link to Step 3: Cleaning Up the Plot Area" title="Direct link to Step 3: Cleaning Up the Plot Area">​</a></h2>
<p>For a more clutter-free design, we will need to remove the redundant elements from our chart. We will add labels in step 4, but this will help us to understand how much space we have to work with.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"title"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"text"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Country Revenue by Segment ($M)"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"anchor"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"start"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"view"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"stroke"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"transparent"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"data"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"dataset"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"layer"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"y"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"aggregate"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"mark"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"color"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"#d4d4d4"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"y"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"xOffset"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Segment"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"sort"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"order"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"descending"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"scale"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"padding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"color"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Segment"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"sort"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"order"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"descending"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"legend"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"orient"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"top"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"title"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"mark"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"stroke"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"white"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"x"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Country"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"sort"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"op"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"order"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"descending"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"axis"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"y"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"quantitative"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"axis"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>The changes have been highlighted in the code above but can be summarized as:</p>
<ul>
<li>Adding a title and anchoring it to the left (start).</li>
<li>Setting the <code>view</code> to have a transparent stroke, so we don't have a border around the plot area.</li>
<li>Setting the <code>legend</code> for the <strong>Segment</strong> field to be at the top, and removing the title (as it is redundant).</li>
<li>Removing both axes (setting them to <code>null</code>), as they are not needed.</li>
</ul>
<p>Here is our refined design:</p>
<div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-labels">Step 4: Labels<a href="https://deneb-viz.github.io/blog/stacked-bar-alternative#step-4-labels" class="hash-link" aria-label="Direct link to Step 4: Labels" title="Direct link to Step 4: Labels">​</a></h2>
<p>For the last part of this walkthrough, I'm going to add labels for each bar using <code>text</code> marks. As our two-layer approach works well, we can use descendant layers so that these marks inherit what they need from the existing layout:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"title"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"text"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Country Revenue by Segment ($M)"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"anchor"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"start"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"view"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"stroke"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"transparent"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"data"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"dataset"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"transform"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"calculate"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"datum.Sales / 1000000"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"as"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales_M"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"layer"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"y"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"aggregate"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"layer"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"mark"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"color"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"#d4d4d4"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"mark"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"text"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"baseline"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bottom"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"dy"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-15</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"text"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Country"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"mark"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"text"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"baseline"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"top"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"dy"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-15</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"text"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales_M"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"aggregate"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"format"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">",d"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"y"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"xOffset"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Segment"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"sort"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"order"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"descending"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"scale"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"padding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"layer"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"mark"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"stroke"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"white"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"color"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Segment"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"sort"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"order"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"descending"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"legend"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"orient"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"top"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"title"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"mark"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"text"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"dy"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-7.5</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"text"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales_M"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"format"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">",d"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"x"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Country"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"sort"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"field"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Sales"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"op"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"order"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"descending"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"axis"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"y"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"quantitative"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"axis"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>I've again highlighted the lines that have changed, but an overview of what I've done is as follows:</p>
<ul>
<li>
<p>Added a <code>transform</code> to calculate the <strong>Sales</strong> measure in millions, and store it in a new field called <strong>Sales_M</strong>. This is used for the labels. We could do this using Power BI formatting against the <strong>Sales</strong> measure, but I'm trying to keep things replicable in Vega-Lite outside Power BI for this example.</p>
</li>
<li>
<p>Created a sub-layer in the first layer, for three marks:</p>
<ul>
<li>Our original <code>bar</code> mark, which is the grey bar for the <strong>Country</strong> field.</li>
<li>A <code>text</code> mark for the <strong>Country</strong> field, offset by <code>dy</code> by -15 pixels (upwards).</li>
<li>A <code>text</code> mark for the (aggregated) <strong>Sales_M</strong> field, offset by <code>dy</code> -by 15 pixels (upwards).</li>
</ul>
<p>Both <code>text</code> marks have opposing <code>baseline</code> properties, so while they share the same <code>y</code> position and <code>offset</code>, they will be positioned above and below their resolved y-position accordingly.</p>
</li>
<li>
<p>The second layer has a similar approach to the first, where we create a sub-layer for two marks:</p>
<ul>
<li>The <code>bar</code> mark, which is the colored bar for the <strong>Segment</strong> field. We have also moved the <code>color</code> encoding for the layer into this sub-layer, so that the <code>text</code> marks do not inherit it.</li>
<li>A <code>text</code> mark for the <strong>Sales_M</strong> field, offset by <code>dy</code> by -7.5 pixels (upwards).</li>
</ul>
</li>
</ul>
<p>And now we have a visual that looks like what we intended:</p>
<div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="wrapping-up">Wrapping Up<a href="https://deneb-viz.github.io/blog/stacked-bar-alternative#wrapping-up" class="hash-link" aria-label="Direct link to Wrapping Up" title="Direct link to Wrapping Up">​</a></h2>
<p>I'm really grateful for Sebastine, Darragh and Kevin for taking the time to write up such a wonderful study on this approach and sharing their techniques with the data visualization community, and I hope that this implementation does that some justice, and help folks to implement this design in other tools. Hopefully anyone reading may have learned a little bit more about what Vega-Lite can do (and how Deneb can help you to achieve similar results in Power BI).</p>
<p>As promised, here are some links to the finished recipe:</p>
<ul>
<li><a href="https://deneb-viz.github.io/assets/files/Deneb%20-%20Stacked%20Bar%20Alternative-ce64280ee628fe47b276c1e000e02514.pbix" target="_blank">Power BI workbook (with visual)</a></li>
<li><a href="https://deneb-viz.github.io/assets/files/Stacked%20Bar%20Chart%20Alternative.deneb-52f8b086155a624eaaef20973fd8d67b.json" target="_blank">Deneb template</a></li>
<li><a href="https://vega.github.io/editor/#/url/vega-lite/N4IgJAzgxgFgpgWwIYgFwhgF0wBwqgegIDc4BzJAOjIEtMYBXAI0poHsDp5kTykBaADZ04JAGyUAVhDYA7EABoQAEySYkEOJghpQq9ZsxoA2qADCbBrMwAnAJ5oQZpLKSrFIAMrkEca47MYF1k4QQACAAUkG0wQmx0lTyRBOB1UAEYATgB2AFYAJgAWMQAOAF8Fc0trewCXNxREnz8jdABRazgbHBsaTQ8klLT0wsK8-OyAZjEKqqtbB3RnV3cmsl9-dABxNlIbWQ2jROTUtEL8kpL8zJLJydmnaoW6lcavZs2QAFkaZWQbADWWgGJzS+XSYghmUKAAYHhZ5rUlvVVu91i1HJ5kIJwgAhBgQGghCAJLygtDTdL5GGTbKZfLwp5IkAAMRsLigcAGH1aTiCshC4SiMTipMGpwyuXS2RKVMKjMRi1Z7NknO56M+HUwXR6fS5xyGaHSuRh6Su2Xy90qj0VjjZHP1aMOjh2ewOGINEsKkwm9MmOQVNSV9tVju8Gt5Pz+0SBRzJhtQ+Vy-tymSygee6BDarWzvQWOSeIJRNSYvJieysMmhRKuRm1oRQZdXWQsgcuYxS35gsi0ViXTLCZuMOyYmpGeZWxbLnbTs7IC1Ot6-U9w2K0yThUyE6VU5srdn4bzIFdXXd-lXFJH2SmNdyO+b+5n6uPUf+sZBCblBVyhXvDaZXdpzbF95wLHEwnxQliUHCULmla4R23ADbXQL44AADxoKA2FAz5AmCUJexFAdPwlS4ShlJMHzQzDsNwjtNU6bplzDct0kmGFMjEGk6xo746JwvDeVPfZnUvVBCg4kp6STf85ibWisKExjI1+d9gQkiFzkovJ+PQ5SGLnT5wKLaDSzItJOMuaypX4gBVWQRGUMJPHUbUIDCNgADMwgAQV8XooDeI95wIgUiOFft4kso1qVTP9yhQxSQEc5zXPc1IvN8gKumwkKeUcRcWL1WKMjEUpoTHeVkszVKnO1Fy3LULKfP8wL8uEl1djPcT4wlDcRjHTJkIUuq0sajKWs8trcqCgqI0cN8Y00-qwTNTIYQKGqxuZCa4CazKZpyjrgq6-NsTMksSTK9dpR4ziygAXQqEAAHdfnoNBchKGElHgGgyCwCkeKUTA6BSXQQG1DDeUbBYwgAJTgUhZAYOAwiYOxXJ5MIAAowC+ABKDwORgNgbEcCB1BiEBXuIGg4DeqHqZsNggUcWwXAgHBogxV79BQVBQFcXxHEFww6bBlUIG8imEBMUBgsEKAGEEFrxbUBgEEocVPIIMJ0hhY2TdJtI1oAfS+OmnqUdW7C6RWQD8HDlCJMgocWUBvMZwRlExcklCQMgyBsPhtSp7W6de+3HdQUwQHfKHMDsHAuXQJhog8HDBApxwAGJlEKIui+j60k+F6HU-T6HMLjTPNGEEJHCYNhsDYBWlGURZ+GNV6XbYN3ZA9yuYdab3ff9pZAOjh4K9AFO085uuPAb0IS05tgcA8bu0F7-9ndVQf3eTlfK590Ip8t62g5DsOKAj9AICjpQ5afXkFH9spv5e60B6HkeoAvYgAvn7AOhpXoYQAPLeW8pLc+k9MSFSUDIWmCDL7gNOEoCmyg44qFSJyWQACpYgGgCcKGvNlDENQDCSgDJv52yQA7Sm8dQDzyrkvDOWcUG2HZjXN6MARAkP-ifSuOc87oLAfmZBpCKbjxAYg-MgcQA4Lwbg6AfhiEx3IJoqGFNGafEwFvDw4NMCQ1QGjHE38GFsJjMnauy9YY7x7tkSgB8RHD1Pk4yRV89ZWw8G-ZAH8v4-2ekoDxgCQAYShqAq+8NagoLkTExRa0PDGKfi-FRNhcEsPwRoohJ9XpICwmkSxghXrAMXjXAAjgwFwpi1A0FIKTEpaAynWKAA" target="_blank" rel="noopener noreferrer">Version in Vega Editor</a></li>
</ul>
<p>Thanks as always for reading!</p>
<p>DM-P</p>]]></content:encoded>
            <category>how-to</category>
            <category>vega-lite</category>
        </item>
        <item>
            <title><![CDATA[Deneb Annual Round-Up]]></title>
            <link>https://deneb-viz.github.io/blog/2024-2025-summary</link>
            <guid>https://deneb-viz.github.io/blog/2024-2025-summary</guid>
            <pubDate>Sun, 23 Mar 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Here's an update on what's happening with Deneb.]]></description>
            <content:encoded><![CDATA[<p>It's a wonderful time of the year when I look over community contributions for my membership in the Microsoft MVP program. As some of this includes looking at how Deneb is doing, I thought it'd also be a good time to provide an update on Deneb's usage and a few bits about what's been happening lately.</p>
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="looking-back">Looking Back<a href="https://deneb-viz.github.io/blog/2024-2025-summary#looking-back" class="hash-link" aria-label="Direct link to Looking Back" title="Direct link to Looking Back">​</a></h2>
<p>When I started figuring out whether Deneb would be possible or feasible, it was probably mid-2020. Once some things had been proven, things started to ramp up in late 2020, with us starting the public preview in April 2021. By September, we'd made the AppSource submission, <a href="https://coacervo.co/deneb_nov_2021" target="_blank" rel="noopener noreferrer">with certification being achieved in November 2021</a>.</p>
<p>I couldn't realistically determine whether building visuals with a tool like Deneb would be acceptable to folks. I've long been a fan of the Vega and Vega-Lite languages, and bringing them into Power BI was always a question of how well received they might be - the languages are powerful, but they aren't the "Power BI way" of doing things. However, it solved real problems for me, so I've been more than happy to make it a thing and keep maintaining it.</p>
<p>Deneb was (and is) intended as a free and open-source visual with community support. I've been clear from the beginning that community adoption and collaboration are needed for any long-term viability. We had some great people out of the gate who "got it" and were happy to share what they were learning and could achieve, which was fantastic to see. Many of these examples are still available (and being added to by their authors) via the <a href="https://deneb-viz.github.io/community/resources">community page</a> if you want to check them out and show these folks some love and appreciation. I'm eternally grateful for their continued support. And many thanks as ever to our <a href="https://deneb-viz.github.io/support#community-experts">community experts</a> who volunteer to be contacted for questions, allowing me to focus on development and maintenance, as well as communities like <a href="https://www.reddit.com/r/PowerBI/" target="_blank" rel="noopener noreferrer">r/PowerBI</a> and the <a href="https://community.fabric.microsoft.com/" target="_blank" rel="noopener noreferrer">Fabric Community forums</a>, where many of you have shared your experiences and examples, or make others aware of Deneb as a solution.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="where-weve-come-to-usage-wise">Where We've Come to (Usage-Wise)<a href="https://deneb-viz.github.io/blog/2024-2025-summary#where-weve-come-to-usage-wise" class="hash-link" aria-label="Direct link to Where We've Come to (Usage-Wise)" title="Direct link to Where We've Come to (Usage-Wise)">​</a></h2>
<p>But back to that viability thing. This time last year, I was reviewing Deneb's usage for the (MVP) year and was blown away to see that we had around <strong>~75,000 downloads</strong> by developers over <strong>~10,000 organizations</strong>. These are downloads to reports by authors; unfortunately, it's impossible to know how many end users are seeing and using these visuals as part of their analytics platform as Deneb is a certified visual (meaning that we can't do telemetry to find this stuff out). Everything I know about usage is what people have been gracious enough to tell me about, whether it's sharing examples, recommendations to others that I happen to come across, or through reviews on AppSource (<a href="https://appsource.microsoft.com/en-us/product/power-bi-visuals/coacervolimited1596856650797.deneb" target="_blank" rel="noopener noreferrer">28 5-star reviews and climbing</a>!)</p>
<p>So, when it came to doing the same review this year, I thought it would be great if we could sustain the same rate of downloads over the year, but we kind of smashed that. As of writing, we got nearly <strong>113,000</strong> downloads from over <strong>16,000</strong> organizations, an increase of <strong>~48%</strong> over the previous review period 🎉</p>
<div align="center"><div></div></div>
<p>This is great for free and open-source data visualization and continued adoption for the Vega ecosystem within Power BI. It's also fantastic news that Vega projects have recently been <a href="https://bsky.app/profile/vega-vis.bsky.social/post/3lkqhrlro6c2y" target="_blank" rel="noopener noreferrer">included in the projects sponsored by NumFOCUS</a>, and new releases of each language are coming soon!</p>
<p>Version 1.7 of Deneb (released last year) is very close to my original vision for getting things working in Power BI at the start of my journey. However, we've learned a lot since then, and our users have had great ideas <a href="https://github.com/deneb-viz/deneb/issues" target="_blank" rel="noopener noreferrer">via our GitHub repo's issue tracker</a>.</p>
<p>Some of these have been delivered. Some are possible but not easy to achieve using the current architecture, and some are great feature ideas but won't be possible due to limitations with the custom visual ecosystem, which is managed and maintained by Microsoft. I have been incredibly unlucky in getting anything done here, but I will continue to lobby the team for whatever I can get, and if things ever change, maybe we can unlock some of these features.</p>
<p>Since then, we've also had features and tools appear in Power BI, like <a href="https://learn.microsoft.com/en-us/power-bi/create-reports/power-bi-field-parameters" target="_blank" rel="noopener noreferrer">field parameters</a> and <a href="https://powerbi.microsoft.com/en-us/blog/power-bi-enhanced-report-format-pbir-in-power-bi-desktop-developer-mode-preview/" target="_blank" rel="noopener noreferrer">PBIR</a>, which extend the functionality of visuals and the source control capabilities of reports accordingly. The "v1" Deneb template format (a Vega or Vega-Lite spec and some basic metadata) is simplistic and it's challenging to extend via the visual properties system without significant burden. If folks are keen to start doing things with PBIR and Deneb, it's not intuitive under this current paradigm.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="so-whats-next">So, What's Next?<a href="https://deneb-viz.github.io/blog/2024-2025-summary#so-whats-next" class="hash-link" aria-label="Direct link to So, What's Next?" title="Direct link to So, What's Next?">​</a></h2>
<p>I want Deneb to be around for many, many more years and to continue to be a free and open-source visual for the community. However, for this to work, we need a better platform to build upon. Therefore, I've been planning, proofing, and developing for the last 6 months on what the future looks like. If I can keep the current work rate up, I'll have more solid details (and demonstrable features) in a few months and an ETA for when this version will start to become more visible.</p>
<p>But here are some things that you can rely upon in terms of what to know going forward at this stage:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="deneb-1x">Deneb 1.x<a href="https://deneb-viz.github.io/blog/2024-2025-summary#deneb-1x" class="hash-link" aria-label="Direct link to Deneb 1.x" title="Direct link to Deneb 1.x">​</a></h4>
<ul>
<li>The current v1 Deneb will remain in AppSource and certified in perpetuity, so your visuals and reports will continue to work.</li>
<li>I'll keep this up to date regarding bugs, security, and custom visual API updates to make it as future-proof as possible for the current feature set.</li>
<li>I'll keep the Vega and Vega-Lite languages as current as possible for each of the current "v5" releases. If future major versions of the languages affect backward compatibility, these will be frozen as of v5.</li>
<li>The status quo will remain regarding v1 being free and open-source, with community (MIT) support.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="deneb-2x">Deneb 2.x<a href="https://deneb-viz.github.io/blog/2024-2025-summary#deneb-2x" class="hash-link" aria-label="Direct link to Deneb 2.x" title="Direct link to Deneb 2.x">​</a></h4>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>First things first</div><div class="admonitionContent_BuS1"><p>With the last bullet point for v1, I may have subconsciously primed you for some expectations around a major version with commercial changes. First, I'll nip that in the bud and say that Deneb "v2" is a major version change for architectural reasons; it's a complete re-write based on all the lessons learned. The Power BI visual will remain free, open-source (and MIT licensed).</p></div></div>
<ul>
<li>The largest change is that the property/persistence system that integrates with Power BI property storage will be very different, more centralized, and extensible for new features. It will have a dedicated JSON schema, allowing developers to validate changes outside of a report via PBIR.</li>
<li>These changes mean that it will be a separate Power BI visual in AppSource with a different unique ID and will be certified. This also means that any visuals in your reports will remain v1 unless you replace them with the new visual.</li>
<li>It's not going to be possible to swap a v1 visual to a v2 visual in place (like you might be able to do for some of the core visuals). We don't have low-level access to migrate properties over. As we want to significantly clean up the visual metadata, the older v1 properties to manage the state will be removed.</li>
<li>The likely migration path will be to export the current visual as a v1 template, which you can import into a v2 visual. It'll handle the conversion for you, and you can pick up where you left off. I'd also like this process to be available as an API for anyone wishing to migrate visuals using scripting and PBIR, but that will depend on complexity and free time (I will do my best to fit it in, though).</li>
</ul>
<p>In terms of new features, the following are confirmed and more or less implemented in the current v2 builds:</p>
<ul>
<li>Linked data (<code>dataset</code>) will be applied to the Vega view via streaming rather than re-processing everything. The re-processing that v1 does causes a complete re-render, and this streaming approach prevents the view from resetting when canvas events (like cross-filtering) occur and should open up many more use cases for dynamic and actionable visuals.</li>
<li>Field parameters will be supported by their name rather than by the internal column or measure they are impersonating. We've had to get some changes provided by MS in conjunction with some significant architectural changes, but there will be a way of managing them (<a href="https://github.com/deneb-viz/deneb/issues/238#issuecomment-2190392568" target="_blank" rel="noopener noreferrer">original proposal here</a>, which is changing a bit but is fundamentally a good indicator of how they will be available to your dataset). If preferable, we'll also offically support the 'legacy' method (where folks have worked around the limitations through creative semantic modeling) as much as we can.</li>
<li>There will be support for drill-down. At the bare minimum, <a href="https://github.com/deneb-viz/deneb/issues/196#issuecomment-1129309009" target="_blank" rel="noopener noreferrer">it will be at the <code>dataset</code> level</a> (operations from the visual header affecting the query against the visual).</li>
<li>Pick and choose which support columns you need (e.g., formatting, cross-highlighting) rather than having everything in your dataset.</li>
<li>Improvement around the display and UX for bindable signals.</li>
</ul>
<p>As mentioned above, there will be much more to include in this list as we progress. I hope that at least some of these will pique your interest for now.</p>
<p>Thanks once again to everyone for your continued support, and I'm looking forward to the next year and beyond!</p>
<p>All the best,</p>
<p>DM-P</p>]]></content:encoded>
            <category>usage</category>
            <category>news</category>
        </item>
        <item>
            <title><![CDATA[Deneb 1.7.2 Standalone Available (and submitted to AppSource)]]></title>
            <link>https://deneb-viz.github.io/blog/1-7-2-submission</link>
            <guid>https://deneb-viz.github.io/blog/1-7-2-submission</guid>
            <pubDate>Tue, 03 Sep 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[1.7.2 is a minor update that fixes initial issues observed in the 1.7 release. The standalone build is available now, and the AppSource version is currently undergoing certification.]]></description>
            <content:encoded><![CDATA[<p>1.7.2 is the next minor update that fixes initial issues observed in the 1.7 release. As usual, the standalone build is available now, and the AppSource version is currently undergoing certification.</p>
<hr>
<p>We've had another couple of minor changes to make as a result of version 1.7, so a new minor version has been submitted to AppSource, to assist affected users. You can view what's included in the <a href="https://deneb-viz.github.io/docs/changelog">Change Log</a>.</p>
<p>The <a href="https://deneb-viz.github.io/docs/getting-started#standalone-version">standalone version</a> has already been published for anyone who wants to take advantage of this. As usual, the AppSource version takes a little longer to go through the certification process, but we expect this to be available within the normal timeline of a few weeks. I will provide an update on its status as soon as I can.</p>
<p>Thanks, as always,</p>
<p>DM-P</p>]]></content:encoded>
            <category>releases</category>
            <category>standalone</category>
            <category>fixes</category>
        </item>
        <item>
            <title><![CDATA[Deneb 1.7.1 Standalone Available (and submitted to AppSource)]]></title>
            <link>https://deneb-viz.github.io/blog/1-7-1-submission</link>
            <guid>https://deneb-viz.github.io/blog/1-7-1-submission</guid>
            <pubDate>Mon, 05 Aug 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[1.7.1 is a minor update that fixes initial issues observed in the 1.7 release. The standalone build is available now, and the AppSource version is currently undergoing certification.]]></description>
            <content:encoded><![CDATA[<p>1.7.1 is a minor update that fixes initial issues observed in the 1.7 release. The standalone build is available now, and the AppSource version is currently undergoing certification.</p>
<hr>
<p>The rollout of 1.7 seems to be going well, and thanks very much to you all for your fantastic feedback. It's great to hear how well you're progressing with the new changes!</p>
<p>Thanks also to those who found and reported some minor issues. You provided excellent reproduction details and helped immensely with testing and validating these fixes, meaning that we could resolve them really quickly.</p>
<p>I've taken the opportunity to incorporate some other quality-of-life improvements, plus an update to Vega-Lite, into this version 1.7.1. You can view what's included in the <a href="https://deneb-viz.github.io/docs/changelog">Change Log</a>.</p>
<p>The <a href="https://deneb-viz.github.io/docs/getting-started#standalone-version">standalone version</a> has already been published for anyone who wants to take advantage of this. As usual, the AppSource version takes a little longer to go through the certification process, but we expect this to be available within the normal timeline of a few weeks. I will provide an update on its status as soon as I can.</p>
<p>Thanks, as always,</p>
<p>DM-P</p>]]></content:encoded>
            <category>releases</category>
            <category>standalone</category>
            <category>fixes</category>
        </item>
        <item>
            <title><![CDATA[Deneb 1.7 is AppSource Certified!]]></title>
            <link>https://deneb-viz.github.io/blog/1-7-certified</link>
            <guid>https://deneb-viz.github.io/blog/1-7-certified</guid>
            <pubDate>Thu, 11 Jul 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[It's a big day - Deneb 1.7 has passed certification! 🎉🎉]]></description>
            <content:encoded><![CDATA[<p>It's a big day - Deneb 1.7 has passed certification! 🎉🎉</p>
<p>It should take around two weeks for the new version to fully deploy to your reports. In the meantime, you can see the full list of changes in the <a href="https://deneb-viz.github.io/docs/changelog">Change Log</a>. This has also been made available for users of the standalone (non-AppSource) version, so you can <a href="https://deneb.link/latest-release" target="_blank" rel="noopener noreferrer">download it from GitHub</a>.</p>
<p>To help AppSource users with the wait, we've recorded some short videos to help you get to know the new features and will be releasing a new one each day. The first feature we're showcasing is dark mode 🌙 But we'll add new videos to the playlist below, so keep checking or like and subscribe (if that's your thing) to stay current.</p>
<iframe width="600" height="325" src="https://www.youtube.com/embed/videoseries?list=PLenEqp5HifcRASUPYL6Nj-a2YtfCBmjz6" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>
<hr>
<p>We extend our heartfelt thanks to our community, especially our dedicated beta testers, for their invaluable contributions that led us to this momentous occasion!</p>]]></content:encoded>
            <category>releases</category>
            <category>certification</category>
            <category>production</category>
        </item>
        <item>
            <title><![CDATA[Deneb 1.7 Available for Beta Testing]]></title>
            <link>https://deneb-viz.github.io/blog/1-7-beta</link>
            <guid>https://deneb-viz.github.io/blog/1-7-beta</guid>
            <pubDate>Mon, 24 Jun 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Deneb 1.7 is a significant update, and we're excited to submit it to AppSource very soon! Before we do that, we're opening beta testing for the community so that we can ensure that the quality of the submitted version is as good as possible for all users.]]></description>
            <content:encoded><![CDATA[<p>Deneb 1.7 is a significant update, and we're excited to submit it to AppSource very soon! Before we do that, we're opening beta testing for the community so that we can ensure that the quality of the submitted version is as good as possible for all users.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-beta-testing">Why Beta Testing?<a href="https://deneb-viz.github.io/blog/1-7-beta#why-beta-testing" class="hash-link" aria-label="Direct link to Why Beta Testing?" title="Direct link to Why Beta Testing?">​</a></h2>
<p>For Deneb, this is a critical phase of development that we can't do without broader assistance. Here are a few important reasons why:</p>
<ul>
<li>
<p>Deneb's user base has grown significantly since its launch, and in the last three months alone, we have had nearly <strong>13,000</strong> downloads by more than <strong>6,500</strong> developers. And there will be many more people than this experiencing the visuals these folks develop in their deployed Power BI reports.</p>
</li>
<li>
<p>Because Deneb is a certified visual, we can't monitor visual usage via telemetry for trust and privacy reasons. We only know about the kinds of use cases Deneb fulfills based on examples that people generously choose to share on social media channels or by a small portion who choose to make their templates available for others to use, or by those who help improve Deneb by reporting issues and making feature requests 🙏</p>
</li>
<li>
<p>So, while we take great care to ensure that all functionality works as well as possible, we can only explore a limited number of use cases ourselves. We want to make sure that those out there who will be using Deneb in unique and innovative ways get a chance to make sure that their solutions will continue to work.</p>
</li>
<li>
<p>Once we submit a new version of Deneb to AppSource, <strong>we're committed to the publication process</strong>: if someone finds a bug, we may be able to fix it very quickly, but it can take anywhere between <strong>3 and 5 weeks</strong> for a visual update to go through the certification process and fully deploy to all reports. This can be a long time for people to wait.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="this-is-where-your-help-is-invaluable">This is where your help is invaluable.<a href="https://deneb-viz.github.io/blog/1-7-beta#this-is-where-your-help-is-invaluable" class="hash-link" aria-label="Direct link to This is where your help is invaluable." title="Direct link to This is where your help is invaluable.">​</a></h4>
<p>If you have some time to dedicate to validating your existing specifications and checking the functionality of the new features, you're going to be (a) getting to play with new features and validating that they're going to help elevate your reports and your productivity processes when using Deneb, and (b) ensuring that not just you and your stakeholders are going to have continuity of service when the update deploys, but we can be confident that our wider community will, too 😀</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-changes-can-i-expect">What Changes Can I Expect?<a href="https://deneb-viz.github.io/blog/1-7-beta#what-changes-can-i-expect" class="hash-link" aria-label="Direct link to What Changes Can I Expect?" title="Direct link to What Changes Can I Expect?">​</a></h2>
<p>We said that 1.7 is a big release, and we mean it! Here are the big-ticket items that may pique your interest further:</p>
<ul>
<li>
<p><strong>Dark mode</strong>—you can now toggle between the traditional light theme and a darker one to reduce eye strain.</p>
<p><img decoding="async" loading="lazy" alt="You can now set the theme to [Dark], to convert the editor into dark mode. This will display all components (except for the preview area) with darker colors." src="https://deneb-viz.github.io/assets/images/dark-theme-standard-5157f71369108f81bd4a691af0e7af52.png" title="You can now set the theme to [Dark], to convert the editor into dark mode. This will display all components (except for the preview area) with darker colors." width="1498" height="777" class="img_ev3q"></p>
</li>
</ul>
<ul>
<li>
<p><strong>Commenting</strong>—you can now add comments to your JSON for documentation and debugging purposes.</p>
<p><img decoding="async" loading="lazy" alt="JavaScript-style block (/* */) and line (//) comments are now valid in the JSON editor." src="https://deneb-viz.github.io/assets/images/json-comments-d885451e472344fdd83eadcf54f5ae70.png" title="JavaScript-style block (/* */) and line (//) comments are now valid in the JSON editor." width="619" height="312" class="img_ev3q"></p>
</li>
<li>
<p><strong>Auto-completion improvements</strong>—suggestions will now be recommended based on the details in the Vega and Vega-Lite schemas.</p>
<p><img decoding="async" loading="lazy" alt="Valid matching entries for language keywords are now available via auto-completion." src="https://deneb-viz.github.io/assets/images/auto-completion-d209f488f486a019024117c26062fcfc.png" title="Valid matching entries for language keywords are now available via auto-completion." width="609" height="254" class="img_ev3q"></p>
</li>
<li>
<p><strong>Inline language documentation</strong> (for Vega-Lite)—the documentation the Vega team makes available for Vega-Lite in its language schema is now available when you hover your mouse over an appropriate location in your JSON. This will help you discover more language features within Deneb itself, and any hyperlinks will navigate you to the correct location on the Vega-Lite documentation site for further reading.</p>
<p><img decoding="async" loading="lazy" alt="Hovering your mouse over language keywords (in Vega-Lite) will display any relevant documentation." src="https://deneb-viz.github.io/assets/images/doc-on-hover-04ab2ff955e44c2f8033ff42d021a26a.png" title="Hovering your mouse over language keywords (in Vega-Lite) will display any relevant documentation." width="609" height="217" class="img_ev3q"></p>
</li>
<li>
<p><strong>Clearer JSON error and warning indications</strong>—any parsing issues are better highlighted closer to their location in the JSON editor.</p>
<p><img decoding="async" loading="lazy" alt="The position of errors and warnings is now better highlighted, so that you can track down JSON parsing issues more quickly." src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkwAAAB+CAYAAADWSU5MAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA56SURBVHhe7d3PbxxnGcBxSwgkxIFL8gegCEGrIgpCqEdyQxUni6Rqq1ZBe+CCxJEIpFLiyG2R91B8AZUejL0+2LF8a1OQi6OQpEqNVWFzqERFRHBsb2kObakQNH7Yd37tO7PP7s7uzuw7P76Hj+p939n1ZnvYr94ZzzsjciIAAABVtbFxRa5d21b99mePyCs/fVh18uBTuXPnjodgAgAAlUYwAQAADEEwhbaeEzl7VuR3e/o8AACoLcfBtC/zFxflTMf8vjY/Je0/dGJpWZ8DAAC1Z4LpiSeekPPnz/d4/OzDHQ+pPv100mBqb0vj4pKstf1och5Mz3docwAAoPYGBdP5xx7r68HEwRQhmAAAQLENOiV37dln5dozz6hOHjyoUDD9dZlrlwAAQF81D6ZOJHGhNwAAGIIVJoMVJgAAMADBZHANEwAAGMBhMPmhZG4p0GX+ak47NmcEEwAAGGBQML32+Dflte8+qjrJ7q/kCoBgAgAAAxBMhgmms891/qvMAQCA2qt1MP33k/ejn+//+nvy4UNflH//8JHYOAAAQK2D6Y8vfsaLo3/u/Ere+s1X5ZP778rf//S8N64dDwAA6qnWwRTGkWFiyR63jwMAAPVW62Da29uT+/fv19rMzIxHmwMAAL7V1VV5/fXXVW8+/bS8+dRTqgzvw+QOwUQwAQCQBsHU+RC0uboIg0mbAwAAvkGn5LQbVxJMFUMwAQAwHME0QTDtLZyW5ca6HMptuXr6tFzZOArmzOMLcv2g9zmp7TRlufOaV3eUuT7M++m+h3SyDCbv84h9DgAAVIPbYHr7VfnCl34ceFXe0o7J0aTBdLhxIRZM3bgpajD1vq/Mgsm8X++zUOYAACg5h8H0jrxkRdJbL3Si6YV3EsfkK5NgWrjd+flIrjcyDqYxOA8m77NQ5gAAKLmBwaQILwg/OTnJYIXJZlabfvBGJz2UuZzkdw1TECYb/iqRdpoqPH3lia3M+PHlzynRdbAuV8LnhYJQ8YNpvfO7g3HrdWO/L9KMB9MYq1oRggkAUGGFCSazwvTk+qE6l5d8g6kTJGGweJHTlL1g3qxM2QGVfOzTVqn8142CJnEazI+i8DnJVS9jyArTBMGk/xsAAKiGQgTT0fr81FeXjNxXmKIwsR/bK0iWntWZlMFkhVjylFzy8dBgGkew4kUsAQCqzHkwuYolw10wJUNIowVTuIoUis87CaYAK0wAgCpzGkzehd6OYslwE0xB9Az9izIlmMxqzoDnDQ+m3tN0sWDiGiYAAFTugunwDXkyuqVA10tvK8fmxFUwaaflupFijo3P2StJXmwNmBscTB1BFPm46BsAgDQKc9G3C/kFU04SF48bXkBNECqxYJoEwQQAqDCCqUzB5K0A2cHkr1RNcu1QpsGUiDkAAKqCYBozmB588H7088evvCwHp2akffbR3Mf/MheeTguc+uxErx8G07jvxx7/85P+e1r7xtdi4wAAlB3B1AmmcZhg+OC9v0n75Rfl3rfOyL9235bjX/ykdONhMOXx+trnBgBAGa2urkYRNIraB1MYBYaJhLKOh8GU9vhRxsOfAQAou9oHkzaexuLiojoOAACqZ9RTciGCiWACAKA2CCZlPA2CCQCA+iCYlPE0CCYAAOqDYFLG05gomIINa80dtc0ebEW4f1H3fQR3IecmlAAARBwG07GsNRflzMXQkqy1tePy426Fyd/+JAqmofvK2e5J69yMXL6lzU0guvHk5DfDjAni0L9vVHxvPD/SwrneeQAAiqIwK0ztrSU509pX5/LiNpiCODChUpRgCt6HugfdWEx8dSMoGYfeY1ayAAAlUJhg2m0tSmPrWJ3LS2GvYbo1F90fyZhdveeNH67OxsZ9s9K6233uzUvW3LmVbojdXZHZzuOb1muEr5tOsCnwJIGT2AuPYAIAlIXbYGpvSyM8JdfclrZ2TI6KGUxmBSkeQb3z+gqTCSo7gmKPTTCZULp0w3o8JzeDY4ebPJiSgdRzSo54AgAUVLFOyU05moq6whSuEukrQP2CyR+PVpdCfQNpWJhlbOjmvH6QZXbtFAAAGSpMMInsy/zFTdlV5/JR2FNygegUXBg9nkHBNCCAXAbT0FjyZXftFAAA2WKFSRlPYxrB5AmuPbIvCjcrUNrqk7cylTg2kgwmc51Uv2NV452S80+7DY8l//om/koOAFBM7oLJvn7JmPJfyBnFDKYbcjl2Wk1ZBfLiR5vvPS0XrUTFnmOMcv2SMU4wBc9JCFeR4tcwEUsAgOIq0Cm56SvFClNWek7JAQCAtAgmZTwNggkAgPogmJTxNMYNpv8cvBv9fPDc9+Xg1Izc+frn8x/fWYiCadTXAQCg7ggmZTyNcYPJBImJERMnd77yOflo9/fyjx99p7Dj2r8BAIC6IZiU8TTGDaYwRgwTJ0UfDx8DAFBnBJMyDgAAYCOYlHEAAAAbwaSMAwAA2AgmZRwAAMBGMCnjaZm9z+w7VwMAgGoqRDDttsz2KEuy1tbn85LNCpPZ/oNtPQAAqDLnweRtutvalPnSBtORXG8QTAAAVJnbYPI24N2UXdknmAAAQGE5DKZjWWsuyvy++bnMweRfy3R1R58DAADl5yyYzKm4xtZx8LjcwWT4F4A3ZU+ZAwAA5eYomEwgmQu9Fa195fh8sMIEAADScH7Rt6+i1zDtNLntAAAAFUAwKeOjGRBMB+typRNMywu3e+cAAEBpFCSY3Mg9mLw5VpgAACg7gkkZH41+48rDjQucjgMAoCIIJmU8rX5bozz44P3o549feVkOTs1I++yjsXEAAFAeBJMyPikTSCaOTCwdffvL8r/33pUPf/lzb1w7HgAAFBvBpIxPKowjw8SSPW4fBwAAyoFgUsYBAABsBJMyDgAAYCOYlHEAAAAbwaSMAwAA2AgmZTwt77YCjXU59O7FNOieSzfk8systO5qcxkK7ixu9rXz7wOV8WbA4Z3L2WQYAFAzDoNJ2YB3ihvvGpMGkxclVjD134B31GAaN7C676P73rTjxuHftZxNhgEAdeQ4mKa/f5wtk2Dy9okbFhPTDKbgruNm49/Mg6nfFjAAAFQbwaSMZ8NEz4zMRKwAursis/bcuZUobG5essYjc3IzmD9cnY3Nza7eC35fOv6punHCh2ACANRXgU7JTT+e8gsmP5Yu37If918xMpHUPdZIu8JkjuvGVBrjB5NZveLaJQBAPRXmou/21lInmjZlV5nLS27BdGsutmrUG0B+UPVfKRoQTOa1Y89NE1aT8ffMI5YAAPVVmGCS9rY0ahJM3mm3Szei483jdMHkh1balatsscIEAKivwgTTbqt8fyXXl3eNUhgy96R1zl4J8h9HgRRczxQPJv+Y+Gm6jtjrhtczjRZMXMMEAMDoinMN05Rjycjzom/74uzLt0wAWWETO602J63OsT0XbyeOCa9Til0Ufmkl/ropEEwAAIyuOKfkHMgzmKqHYAIA1BfBpIxDY4Jp0N3MAQCoLoJJGUcfbI0CAKgpgkkZBwAAsBFMyjgAAICNYFLG0yC2AACoD4JJGU+DYAIAoD4IJmU8DYIJAID6IJiU8TQIJgAA6oNgUsbTmCiYgj/Pv7oT3nnb/Z/pd9+Hf7+l5YXb6nGjGuV1e/fUKxdvk+LGuhx6++5xzyoAqBLnwdTeWnK2PYq7FSb/CzUKJu9LVjtuinaasbDJ7Mt+hNcdLZj67LeXM2/LG2vj5Nhc9P+y+/9XOw4AUD5Og8nbcLe5LW1lbhrcBlOwzYgJiqIEU/A+zEpJpsGU8nUrEUzeCpofhwQTAFSHw2Aym+9uyq46Nx3ugmmAuysye25FWtYmu3YU2Jv6GlFgxJ43K61bncfmmM5YFGPmGOu5o8WGv2qS1am6UGwz4Q47mJJz4ftNfgY+axPixL8z9hkYsY2Nk5F2Qy5rc8nXTM4DACrNXTDtb3qrS2tmlSk4JdfYOtaPzUlhg8l8GYerGObLPfmFHzFf7nNy0/wcPM98gfuh0Rn3xoJ5+1j18TDZB5P3Pq3VmoErTObfEvsc0q8wmdftHmeeZ8VVTHKu99hBK0wAgOpyG0ydSJrfD8fMitOSrLWtY3JW3GCyQib5OLE6Eq2sWMdF4WE/t+d51nPD154qE2zx358Mpt6VJDvwBgVTfJXIsF/XC7XEmMf7vOLPM+zfQTABQD05X2HqXr90LGtNO6DyV75g8kOg+wVuRUeaYCrUF/2QYPLeuzWf/FwGBJMXRClWrqIgC481v6Pvap6PYAKAenJ8DZO1otTelsaUr2kqXTAlIsL/wk8ZTN7P/VZk0sj6lJwfPGHIhPEShY23Itb9HLwIsj+XYKw3hOKvG/67e48LmPkokvwg7XusMfAUKQCgqhwGU0dwWs433dNxRvlWmMJwCFxa6V5jYx2nBpORPC030hd/Dhd9e+8v/Lfc8KKpGyt++ITvdXZ1pRMz8WCKPd9ejYr9O+ekFXvd5Ok663k9r2kkfmfP+xoQVwCAynAbTI4VMpgAAEDhEEzKeBoEEwAA9UEwKeNpEEwAANQHwaSMp0EwAQBQHwSTMp4GwQQAQH0QTMo4AACAjWBSxgEAAGwEkzIOAABgI5iUcQAAABvBpIyntbdwWpZPn5YrG0fqPAAAqAZnwdTeWrK2RXGzPUo2K0xmy5ALcv1AmwMAAFVQnBWmkm2+23Uk1xsEEwAAVVaYYNptLUpj61idywvBBAAA0ihGMDlYXTKyuujbXMt0dUefAwAA5VeIYHKxumRkFUyGfwF4U/aUOQAAUG7ug2l/U844WF0yWGECAABpOA6mY1lrulldMnK/hmmnyW0HAACoALfB5HB1ycg9mA7W5UonmJYXbvfOAQCA0ijGRd+O5B5M3hwrTAAAlB3BpIyPRr9x5eHGBU7HAQBQEQSTMp4WW6MAAFAPBJMyDgAAYCOYlHEAAAAbwaSMAwAA2CYPpjvyf/msRnHIb2YcAAAAAElFTkSuQmCC" title="The position of errors and warnings is now better highlighted, so that you can track down JSON parsing issues more quickly." width="588" height="126" class="img_ev3q"></p>
</li>
<li>
<p><strong>Improved JSON editor state preservation</strong>—Deneb will track the state of anything you've done in the JSON editor to make your specification easier to navigate, such as code folding, for the current editing session. This will include when you exit and re-enter the advanced editor (provided you don't leave the current report page).</p>
</li>
<li>
<p><strong>Auto unit formatting</strong>—a new format type that applies the same logic as Power BI format numbers in K, M, Bn, etc., with less effort than the existing Power BI value formatter.</p>
</li>
<li>
<p><strong>Advanced cross-filtering</strong> (for Vega)—new expression functions to help generate cross-filtering of report items based on a filter against the original dataset sent to Deneb before any transformations may have been applied.</p>
</li>
<li>
<p>Improved tracking of dataset field allocation within JSON for dataset changes and templating purposes.</p>
</li>
<li>
<p>New signals that track the visual container scroll position.</p>
</li>
<li>
<p>Many performance enhancements and bug fixes.</p>
</li>
</ul>
<p>Check the <a href="https://deneb-viz.github.io/docs/next/changelog">Change Log</a> for a more complete list and links to more detailed documentation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-i-help">How Can I Help?<a href="https://deneb-viz.github.io/blog/1-7-beta#how-can-i-help" class="hash-link" aria-label="Direct link to How Can I Help?" title="Direct link to How Can I Help?">​</a></h2>
<p>As mentioned above, there are two key things we need to ensure:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-everything-youve-already-made-continues-to-work">1. Everything you've already made continues to work.<a href="https://deneb-viz.github.io/blog/1-7-beta#1-everything-youve-already-made-continues-to-work" class="hash-link" aria-label="Direct link to 1. Everything you've already made continues to work." title="Direct link to 1. Everything you've already made continues to work.">​</a></h4>
<p>This is perhaps the most straightforward thing you can do, but it's the most important. Even if you do the following bare-minimum tests and everything looks good, this is incredibly helpful in validating things:</p>
<ul>
<li>
<p>Update a Deneb visual to the latest version and ensure it continues working as expected for your users.</p>
</li>
<li>
<p>Update a Deneb visual to the latest version and ensure it continues working as you expect as a developer.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-the-new-features-work-as-you-expect-them-to">2. The new features work as you expect them to.<a href="https://deneb-viz.github.io/blog/1-7-beta#2-the-new-features-work-as-you-expect-them-to" class="hash-link" aria-label="Direct link to 2. The new features work as you expect them to." title="Direct link to 2. The new features work as you expect them to.">​</a></h4>
<p>Again, we try to cover as much as possible ahead of time, but beta testing helps us confirm that the features and fixes we're implementing cover your use cases. You might even find use cases we didn't think of that can make Deneb even better in the long run or might possibly cause some unintended side effects in the shorter term.</p>
<p>With anything that comes up here, we can decide if a feature needs additional tweaks before submission (if it's simple), or we might learn that a feature isn't ready for all users. This is, again, all valuable feedback that is best to know before we begin the submission and certification process.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-i-download-and-use-the-beta-release">How Can I Download And Use the Beta Release?<a href="https://deneb-viz.github.io/blog/1-7-beta#how-can-i-download-and-use-the-beta-release" class="hash-link" aria-label="Direct link to How Can I Download And Use the Beta Release?" title="Direct link to How Can I Download And Use the Beta Release?">​</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Use a copy of any production reports!</div><div class="admonitionContent_BuS1"><p>If you are testing a production report, it is strongly suggested that you save a copy of your workbook and work with that for testing purposes before converting a visual over to a beta build instance. This means that you don’t have to worry about reverting your existing production visual back to 1.6 and losing any functionality that may be present in 1.7.</p></div></div>
<p>The latest version is always published and available for download on our GitHub <a href="https://deneb.link/beta-build" target="_blank" rel="noopener noreferrer">repository's beta channel page</a>:</p>
<ul>
<li>
<p>The visual (.pbiviz) file is available from the list of assets at the bottom, e.g.:</p>
<p><img decoding="async" loading="lazy" alt="The GitHub repository contains a Beta Release page, where you can download the Power BI visual file (.pbiviz) for the latest beta version." src="https://deneb-viz.github.io/assets/images/beta-download-page-github-e996a0dd2de204ac1490bc1a03f86c9d.png" title="The GitHub repository contains a Beta Release page, where you can download the Power BI visual file (.pbiviz) for the latest beta version." width="744" height="383" class="img_ev3q"></p>
</li>
</ul>
<ul>
<li>
<p>With the file downloaded, you can then <a href="https://learn.microsoft.com/en-us/power-bi/developer/visuals/power-bi-custom-visuals?WT.mc_id=DP-MVP-5003712#custom-visual-files" target="_blank" rel="noopener noreferrer">manually import it into your report</a>.</p>
</li>
<li>
<p>To begin testing, create a visual using the new beta version or change an existing one from the current AppSource version to the installed beta version.</p>
</li>
</ul>
<p><strong>Note that you should always exercise care when downloading and installing Power BI visual files from unknown/untrusted sources</strong>. Any visuals published and made available from Deneb's GitHub repository will conform to Deneb's <a href="https://deneb-viz.github.io/privacy-policy">privacy policy</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="i-checked-and-somethings-not-right-what-now">I Checked, and Something's Not Right. What Now?<a href="https://deneb-viz.github.io/blog/1-7-beta#i-checked-and-somethings-not-right-what-now" class="hash-link" aria-label="Direct link to I Checked, and Something's Not Right. What Now?" title="Direct link to I Checked, and Something's Not Right. What Now?">​</a></h2>
<p>The best thing you can do is let us know. Don't assume someone else has already found it and told us! We can manage duplicate issues if they occur, but it's always good to check to see if the <a href="https://github.com/deneb-viz/deneb/issues" target="_blank" rel="noopener noreferrer">list of open issues</a> has what you're planning to tell us about.</p>
<p>If you find a bug 🐛or have an enhancement 🌟 you'd like, you can <a href="https://github.com/deneb-viz/deneb/issues" target="_blank" rel="noopener noreferrer">create an issue in our GitHub repository</a> if it does not exist or add your voice to an existing issue if it's there.</p>
<p>Because everyone's setup is always unique to them, a lot of the time we spend on bugs is spent understanding things that may be specific to the situation. Anything we can do to cut this time down means we can find and fix things faster. As such, the following information is always going to be helpful if you can provide it:</p>
<ul>
<li>
<p>The version build (please <a href="https://deneb-viz.github.io/community/early-access#providing-feedback-on-early-access-builds">refer here</a> to find out how to obtain this).</p>
</li>
<li>
<p>Prescribed steps to reproduce the issue.</p>
</li>
<li>
<p>Expected outcome.</p>
</li>
<li>
<p>Actual outcome.</p>
</li>
<li>
<p>Supporting screenshots or a short video.</p>
</li>
<li>
<p>Specification and/or sample workbook that can reproduce the issue.</p>
</li>
</ul>
<p>Unfortunately, .pbix files aren’t a valid file type for attaching a workbook to your GitHub issue, but you can change the extension (e.g., to .zip), and this will work. In reproducing issues and sharing the above, <strong>please use public or anonymized data</strong>, as we cannot be held responsible for the data you share with us.</p>
<p>If you have a suggestion for improvement, it would be great if you could be as descriptive as possible about how you think this should work. Again, the following should help provide you with some ideas for helping me get on your wavelength:</p>
<ul>
<li>
<p>User stories or short narratives.</p>
</li>
<li>
<p>Mockups (taking existing screenshots and annotating them is totally fine).</p>
</li>
</ul>
<p>Note that enhancements will likely not be candidates for implementation during the beta testing phase but will help us understand what you need from Deneb and help us improve things in future releases.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="when-will-beta-testing-be-finished-and-deneb-submitted-to-appsource">When Will Beta Testing Be Finished and Deneb Submitted to AppSource?<a href="https://deneb-viz.github.io/blog/1-7-beta#when-will-beta-testing-be-finished-and-deneb-submitted-to-appsource" class="hash-link" aria-label="Direct link to When Will Beta Testing Be Finished and Deneb Submitted to AppSource?" title="Direct link to When Will Beta Testing Be Finished and Deneb Submitted to AppSource?">​</a></h2>
<p>We want to get to AppSource as quickly as possible, but we want to be sure not to rush if things are not fully ready.</p>
<p>The timeline will depend on what is found. We are planning an initial two-week phase of validation, identifying key issues and triaging them, which is due to be completed on <strong>Monday, July 8th</strong>.</p>
<p>If no significant or blocking issues occur, we'll submit it as soon as possible after this date. If we have things to fix, we will issue a new beta release with a tighter time loop for feedback and continue this until we're ready to go. This should ideally be done and ready before the end of July. Assuming the normal AppSource submission and certification timelines apply, Deneb should be live in reports by the end of August.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="thank-you">Thank You<a href="https://deneb-viz.github.io/blog/1-7-beta#thank-you" class="hash-link" aria-label="Direct link to Thank You" title="Direct link to Thank You">​</a></h2>
<p>We say this a lot, but we rely incredibly on the Power BI and Deneb community to help promote, test, and support Deneb so everyone can benefit. We're also so fortunate that the Vega development team continues to support and update Vega and Vega-Lite, which provide a fantastic set of tools for bespoke data visualization. Without these people and their commitment to the community, we would not be where we are today. 🙏</p>
<p>We look forward to bringing 1.7 to a Power BI near you soon!</p>]]></content:encoded>
            <category>releases</category>
            <category>testing</category>
            <category>beta</category>
        </item>
    </channel>
</rss>